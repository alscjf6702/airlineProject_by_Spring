<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airline.mapper.JoinMapper">

<select id="checkEmail" resultType="String">
	select mail from kakaouser where mail= #{email};
</select>

<select id="checkUserIdAndEmail" resultType="String">
	select mail from kakaouser where mail= #{email} and userId = #{userId}
</select>

<update id="updatePwdByMailKey" parameterType="map">
	update kakaouser set pwd = #{mail_key} where userId = #{userId}
</update>

<select id="getUserId" resultType="com.airline.vo.KakaoUserVO" parameterType="map">
	select * from kakaouser where mail = #{email} and mail_key = #{mail_key}
</select>

<select id="checkMember" resultType="com.airline.vo.KakaoUserVO" parameterType="map">
	select * from kakaouser where 
	userNameE = #{userNameE}
	and userNameK = #{userNameK}
	and gender = #{gender}
	and userReginumFirst = #{userReginumFirst}
	and userReginumLast = #{userReginumLast}
</select>

<select id="getTerms" resultType="com.airline.vo.TermsVO">
	select * from terms where termsCode = #{termscode}
</select>

<insert id="insertMember">
	insert into kakaouser(
		userId, userNick, userNameK, userNameE, gender, pwd, 
		mail, 
		phone,
		postCode, 
		address, userReginumFirst, userReginumLast)
		
		values(
			#{userId}, #{userNick}, #{userNameK}, #{userNameE}, #{gender}, #{pwd},
			 #{mail}, #{phone}, #{postCode}, #{address}, 
			#{userReginumFirst}, #{userReginumLast}
	)
	
</insert>

<insert id="insertkakaoMember" parameterType="com.airline.vo.KakaoUserVO">
	insert into kakaouser(
		userId, userNick, userNameK, userNameE, gender, pwd, 
		mail, 
		phone,
		postCode, 
		address, userReginumFirst, userReginumLast)
		
		values(
			#{userId}, #{userNick}, #{userNameK}, #{userNameE}, #{gender}, #{pwd},
			 #{mail}, #{phone}, #{postCode}, #{address}, 
			#{userReginumFirst}, #{userReginumLast}
	)
	
</insert>

<select id="userIdDuplicateCheck" resultType="Integer">
	select count(userId) from kakaouser where userId = #{userId}
</select>
<select id="userNickDuplicateCheck" resultType="Integer">
	select count(userNick) from kakaouser where userNick = #{userNick}
</select>

<select id="kakaoLoginCheck" resultType="com.airline.vo.KakaoUserVO">
	select * from kakaouser where mail = #{email} and userNameK = #{userNameK}
</select>

</mapper>